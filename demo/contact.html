<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"/>

    <title>exforms-client demo</title>

    <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../elements/model/exf-model.html"/>

</head>
<body>
    <fore-form id="my-form">
        <fore-model id="address">
            <fore-instance id="default" src="address.xml"></fore-instance>

            <fore-bind id="title" ref="title" type="string"></fore-bind>
            <fore-bind id="firstname" ref="firstNames" type="string" required="true()" relevant="true()"></fore-bind>
            <fore-bind id="name" ref="name" type="string" required="true()" relevant="true()"></fore-bind>
            <fore-bind id="street" ref="street" type="string"></fore-bind>
            <fore-bind id="city" ref="city" type="string"></fore-bind>
            <fore-bind id="zip" ref="zip" type="integer"></fore-bind>
            <fore-bind id="country" ref="country" type="string"></fore-bind>


            <fore-submission id="s-save"
                            resource="contacts/contact"
                            replace="none"
                            method="post">
                <fore-action ev:event="xforms-submit-done">
                    <fore-message level="ephemeral">Contact has been saved.</fore-message>
                    <fore-dispatch name="unload-subforms" targetid="contact"></fore-dispatch>
                </fore-action>
            </fore-submission>


            <fore-instance id="i-countries" src="countries.xml"></fore-instance>

            <fore-bind id="counties" ref="instance('i-countries')/country">
                <fore-bind id="countryName" ref="name"></fore-bind>
                <fore-bind id="countryValue" ref="value"></fore-bind>
            </fore-bind>

            <fore-send ev:event="xforms-ready" submission="s-load-from-master"></fore-send>
        </fore-model>

        <fore-group appearance="full">
            <fore-input bind="title">
                <fore-label id="title">Title</fore-label>
            </fore-input>
            <fore-input bind="firstname">
                <fore-label id="firstNames">First names</fore-label>
            </fore-input>
            <fore-input bind="name">
                <fore-label id="name">Name</fore-label>
            </fore-input>
            <fore-input bind="street">
                <fore-label id="street">Street</fore-label>
            </fore-input>
            <fore-input bind="city">
                <fore-label id="city">City</fore-label>
            </fore-input>
            <fore-input bind="zip">
                <fore-label id="zip">Zip</fore-label>
                <fore-alert>Please put your ZIP code here</fore-alert>
            </fore-input>
            <fore-select1 bind="country">
                <fore-label bind="country">Country</fore-label>
                <fore-itemset bind="countries">
                    <fore-label bind="countryName"></fore-label>
                    <fore-value bind="countryValue"></fore-value>
                </fore-itemset>
            </fore-select1>

            <fore-trigger>
                <fore-label>update table</fore-label>
                <fore-hint>This button will update the table above with the data from the subform</fore-hint>
                <fore-send submission="s-save"></fore-send>
            </fore-trigger>
        </fore-group>
    </fore-form>
</body>
</html>
