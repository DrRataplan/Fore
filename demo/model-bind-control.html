<exf-model id="record">
    <exf-instance>
        <data>
            <salary>110</salary>
            <average>120.00</average>
            <items>
                <item></item>
            </items>
        </data>
    </exf-instance>

    <exf-instance id="conf">
        <data>
            <target-collection>data/records/record</target-collection>
            <count>1</count>
        </data>
    </exf-instance>

    <exf-instance id="loadedbyfunction">
        {
        let $inst := generateSomehow()
        }
    </exf-instance>

    <exf-instance id="byFunctionButFromAttr" src="{$someData}"></exf-instance>
    <exf-instance id="byFunctionButFromDb" src="{doc($myRoot)/}"></exf-instance>

    <!--
        [
            {
                "bind":"salary",
                "readonly":false,
                "required":true,
                "value":110,
                "datatype":"xs:string",
                "valid":true,
                "relevant":true
            },
            {
                "bind":"items",
                "relevant":true
            },
            {
                "bind":"item",
                "readonly":false,
                "required":true,

            }
        ]
    -->

    let $salary := exf-instance[1]//salary[string-length(.) != 0]

    <exf-bind id="salary" ref="//salary">
        <exf-required>
            <exf-alert>salary is required</exf-alert>
        </exf-required>
        <exf-type expr="xs:decimal">
            <exf-alert>salary is not a decimal</exf-alert>
        </exf-type>
        <exf-constraint expr=". gt ../average">
            <exf-alert>salary is not too low</exf-alert>
        </exf-constraint>
    </exf-bind>

    <!-- the context here is instance() which means the first instance in doc order -->
    <exf-bind id="items" ref="items">
        <exf-bind id="item" ref="item" required="true"></exf-bind>
    </exf-bind>

    <!-- another shortcut to XForms - simply use XQuery var for instance addressing -->
    <exf-bind id="target-collection" ref="$conf//target-collection" required="true()"></exf-bind>

    <!--
    'db' scheme here is used as a posssible sample to write to an absolute address
    -->
    <exf-submission id="save"
                    resource="xmldb:doc({$conf/target-resource}{count}.xml)"
                    replace="none">
        <exf-submit-error>
            <exf-message>storing record failed</exf-message>
        </exf-submit-error>
    </exf-submission>

    <exf-function signature="foo:func1(param as xs:string)">

    </exf-function>

    <exf-ready>
        <!-- some actions when model is up -->
    </exf-ready>
</exf-model>

<!-- Runtime:
exf-form will apply the JSON provided by server to the local UI by
using id references.

Advantage: can be nearly any kind of control as long as it plays by the conventions
of HTML controls using 'value' or 'checked' plus readonly, required etc.
-->
<exf-form model="record">
    <input bind="salary" value="this will get substituted by model-bridge">

    <exf-repeat bind="items" append delete>
        <!--
        a 'required' or 'readonly' attribute could be set in addition to use browser built-in validation feature to
        give early feedback.
        -->
        <input bind="item" required>
    </exf-repeat>
</exf-form>
